<html>
  <head>
    <title>Lottie/TGS Editor</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/animation-area.css">
    <link rel="stylesheet" type="text/css" href="css/timeline-area.css">
    <link rel="stylesheet" type="text/css" href="css/overlays.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.5.3/lottie.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.5/ace.js"></script>
    <script src="https://cdn.jsdelivr.net/pako/1.0.3/pako.min.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
  </head>
  <body style="color: #0000 !important;">
		<div id="header">
      Lottie/TGS Editor
      <div id="headerButtons">
        <span id="infoButton" class="material-icons white-button">info</span>
      </div>
    </div>
    <div id="content">
      <table>
        <col width="1400px">
        <col width="512px">
        <tr>
          <th>
            <span id="codeAreaButton" class="tabSwitcher active" onclick="switchToTab('codeArea')">
              JSON Data<span class="material-icons">code</span>
            </span>
            <span id="timelineAreaButton" class="tabSwitcher" onclick="switchToTab('timelineArea')">
              Timeline Editor<span class="material-icons">playlist_play</span>
            </span>
          </th>
          <th>Animation <span class="material-icons">movie</span></th>
        </tr>
        </tr>
          <td>
            <div id="codeArea" class="tab active"></div>
            <div id="timelineArea" class="tab">
              Coming soon...
            </div>
          </td>
          <td id="animationArea">
            <div id="animationView"></div>
            <p id="userIO">
              <button type="button" onclick="setAnimation()">Refresh</button>
              <input type="checkbox" id="autoRefresh" name="autoRefresh" value="autoRefresh" checked>
              <label for="autoRefresh">Auto refresh</label>
              <span id="IOdivider">||</span>
              <button type="button" onclick="formatCode()">Format Code</button>
              <br><br>
              Load file: <input type="file" id="fileInput"></input>
              <br><br>
              <button id="saveAsGzip">Save as TGS/Gzip</button>
              <button id="saveAsJSON">Save as Lottie/JSON</button>
            </p>
          </td>
        </tr>
      </table>
    </div>
    <div id="messageArea"></div>
    <div id="overlayBackground"></div>
    <div id="infoArea" class="overlay">
      <div id="closeInfoAreaButton" class="material-icons black-button">close</div>
      <h2>Lottie/TGS Editor</h2>
      <p>This Lottie/TGS Editor was made as a tool to experiment with Lottie/TGS files.</p>
      <p>
        TGS files are used for animated stickers in Telegram Messenger.
        TGS files are Gzip archives which contain Lottie data.
        The Lottie data is stored in JSON format, as can be seen in the code editor on this page.
      </p>      
      <p>
        A useful resource for figuring out how the Lottie format works is the following: <br>
        <a target="_blank" href="https://mattia.basaglia.gitlab.io/tgs/group__Lottie.html">
          https://mattia.basaglia.gitlab.io/tgs/group__Lottie.html
        </a>
      </p>
      <p>Note that there are some extra requirements for adding you sticker to Telegram, see <a target="_blank" href="https://core.telegram.org/animated_stickers">here</a>.</p>
    </div>
    <div id="dropArea" class="overlay">
      <p>Drop a TGS or JSON file here to open it!</p>
      <p class="material-icons">open_in_browser</p>
      <p>Warning: this will erase the current animation!</p>
      <p class="small">(but you can still undo with CTRL+Z)</p>
    </div>
  </body>
</html>
